{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\00134\\\\Desktop\\\\Pro\\\\tour\\\\frontend\\\\src\\\\pages\\\\ManageBookings.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport CommonSection from \"../shared/CommonSection\";\nimport { BASE_URL } from \"../utils/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManageBookings() {\n  _s();\n  const [list, setList] = useState([]);\n  const token = localStorage.getItem(\"token\");\n  useEffect(() => {\n    fetch(`${BASE_URL}/booking`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setList);\n  }, []);\n  const request = async (bookingId, type) => {\n    const body = {\n      bookingId,\n      type\n    };\n    if (type === \"reschedule\") {\n      const d = prompt(\"Enter new date (YYYY-MM-DD):\");\n      if (!d) return;\n      body.requestedDate = d;\n    }\n    await fetch(`${BASE_URL}/booking-requests`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(body)\n    });\n    alert(\"Request submitted.\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(CommonSection, {\n      title: \"Manage Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: list.map(b => {\n          var _b$tour, _b$date;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 border rounded-3 d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: b.tourName || ((_b$tour = b.tour) === null || _b$tour === void 0 ? void 0 : _b$tour.title)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 38,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 38,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Status: \", b.status]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 39,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Date: \", (_b$date = b.date) === null || _b$date === void 0 ? void 0 : _b$date.slice(0, 10)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 40,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 37,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn secondary__btn\",\n                  onClick: () => request(b._id, \"reschedule\"),\n                  children: \"Reschedule\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 43,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn primary__btn\",\n                  onClick: () => request(b._id, \"cancel\"),\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 44,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 42,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 15\n            }, this)\n          }, b._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_s(ManageBookings, \"ZBNfaudzy8bVxb8UgkyyMnLdlWY=\");\n_c = ManageBookings;\nvar _c;\n$RefreshReg$(_c, \"ManageBookings\");","map":{"version":3,"names":["React","useEffect","useState","CommonSection","BASE_URL","ManageBookings","list","setList","token","localStorage","getItem","fetch","headers","Authorization","then","r","json","request","bookingId","type","body","d","prompt","requestedDate","method","JSON","stringify","alert","map","b","tourName","tour","title","status","date","slice","_id"],"sources":["C:/Users/00134/Desktop/Pro/tour/frontend/src/pages/ManageBookings.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CommonSection from \"../shared/CommonSection\";\nimport { BASE_URL } from \"../utils/config\";\n\nexport default function ManageBookings() {\n  const [list, setList] = useState([]);\n  const token = localStorage.getItem(\"token\");\n\n  useEffect(() => {\n    fetch(`${BASE_URL}/booking`, { headers: { Authorization: `Bearer ${token}` } })\n      .then(r=>r.json()).then(setList);\n  }, []);\n\n  const request = async (bookingId, type) => {\n    const body = { bookingId, type };\n    if (type === \"reschedule\") {\n      const d = prompt(\"Enter new date (YYYY-MM-DD):\");\n      if (!d) return;\n      body.requestedDate = d;\n    }\n    await fetch(`${BASE_URL}/booking-requests`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n      body: JSON.stringify(body)\n    });\n    alert(\"Request submitted.\");\n  };\n\n  return (\n    <section>\n      <CommonSection title={\"Manage Bookings\"} />\n      <div className=\"container\">\n        <div className=\"row\">\n          {list.map(b => (\n            <div key={b._id} className=\"col-12 mb-3\">\n              <div className=\"p-3 border rounded-3 d-flex justify-content-between align-items-center\">\n                <div>\n                  <div><strong>{b.tourName || b.tour?.title}</strong></div>\n                  <div>Status: {b.status}</div>\n                  <div>Date: {b.date?.slice(0,10)}</div>\n                </div>\n                <div className=\"d-flex gap-2\">\n                  <button className=\"btn secondary__btn\" onClick={()=>request(b._id, \"reschedule\")}>Reschedule</button>\n                  <button className=\"btn primary__btn\" onClick={()=>request(b._id, \"cancel\")}>Cancel</button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}