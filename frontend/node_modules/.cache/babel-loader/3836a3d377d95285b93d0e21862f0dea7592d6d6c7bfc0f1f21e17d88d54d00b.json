{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import CommonSection from\"../shared/CommonSection\";import{useNavigate,useSearchParams}from\"react-router-dom\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Payment(){var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),params=_useSearchParams2[0];var navigate=useNavigate();var bookingId=params.get(\"bookingId\");var amount=params.get(\"amount\");var pay=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");_context.next=3;return fetch(\"\".concat(BASE_URL,\"/payment/create\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({amount:amount,bookingId:bookingId})}).then(function(r){return r.json();});case 3:res=_context.sent;window.location.href=res.checkoutUrl;case 5:case\"end\":return _context.stop();}},_callee);}));return function pay(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(CommonSection,{title:\"Payment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-3\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Amount: \\u20B9\",amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Booking: \",bookingId]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary__btn w-100\",onClick:pay,children:\"Pay Now\"})]})})})})]});}","map":{"version":3,"names":["React","CommonSection","useNavigate","useSearchParams","BASE_URL","Payment","params","navigate","bookingId","get","amount","pay","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","r","json","res","window","location","href","checkoutUrl"],"sources":["C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/src/pages/Payment.jsx"],"sourcesContent":["import React from \"react\";\nimport CommonSection from \"../shared/CommonSection\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { BASE_URL } from \"../utils/config\";\n\nexport default function Payment() {\n  const [params] = useSearchParams();\n  const navigate = useNavigate();\n  const bookingId = params.get(\"bookingId\");\n  const amount = params.get(\"amount\");\n\n  const pay = async () => {\n    const token = localStorage.getItem(\"token\");\n    const res = await fetch(`${BASE_URL}/payment/create`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ amount, bookingId })\n    }).then(r=>r.json());\n    window.location.href = res.checkoutUrl;\n  };\n\n  return (\n    <section>\n      <CommonSection title={\"Payment\"} />\n      <div className=\"container\">\n        <div className=\"row justify-content-center\">\n          <div className=\"col-12 col-md-6 col-lg-6\">\n            <div className=\"p-4 border rounded-3\">\n              <h5>Amount: â‚¹{amount}</h5>\n              <p>Booking: {bookingId}</p>\n              <button className=\"btn primary__btn w-100\" onClick={pay}>Pay Now</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"mappings":"ibAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,cAAa,KAAM,yBAAyB,CACnD,OAASC,WAAW,CAAEC,eAAe,KAAQ,kBAAkB,CAC/D,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,wFAE3C,cAAe,SAASC,QAAO,EAAG,CAChC,qBAAiBF,eAAe,EAAE,sDAA3BG,MAAM,sBACb,GAAMC,SAAQ,CAAGL,WAAW,EAAE,CAC9B,GAAMM,UAAS,CAAGF,MAAM,CAACG,GAAG,CAAC,WAAW,CAAC,CACzC,GAAMC,OAAM,CAAGJ,MAAM,CAACG,GAAG,CAAC,QAAQ,CAAC,CAEnC,GAAME,IAAG,4FAAG,kJACJC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,uBACzBC,MAAK,WAAIX,QAAQ,oBAAmB,CACpDY,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAkB,CAAEC,aAAa,kBAAYN,KAAK,CAAG,CAAC,CACjFO,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEX,MAAM,CAANA,MAAM,CAAEF,SAAS,CAATA,SAAU,CAAC,CAC5C,CAAC,CAAC,CAACc,IAAI,CAAC,SAAAC,CAAC,QAAEA,EAAC,CAACC,IAAI,EAAE,GAAC,QAJdC,GAAG,eAKTC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGH,GAAG,CAACI,WAAW,CAAC,qDACxC,kBARKlB,IAAG,0CAQR,CAED,mBACE,wCACE,KAAC,aAAa,EAAC,KAAK,CAAE,SAAU,EAAG,cACnC,YAAK,SAAS,CAAC,WAAW,uBACxB,YAAK,SAAS,CAAC,4BAA4B,uBACzC,YAAK,SAAS,CAAC,0BAA0B,uBACvC,aAAK,SAAS,CAAC,sBAAsB,wBACnC,sBAAI,gBAAS,CAACD,MAAM,GAAM,cAC1B,qBAAG,WAAS,CAACF,SAAS,GAAK,cAC3B,eAAQ,SAAS,CAAC,wBAAwB,CAAC,OAAO,CAAEG,GAAI,UAAC,SAAO,EAAS,GACrE,EACF,EACF,EACF,GACE,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}