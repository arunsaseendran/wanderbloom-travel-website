{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import CommonSection from\"../shared/CommonSection\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminRequests(){const[list,setList]=useState([]);const token=localStorage.getItem(\"token\");const load=()=>{fetch(\"\".concat(BASE_URL,\"/booking-requests\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(r=>r.json()).then(setList);};useEffect(load,[]);const decide=async(id,decision)=>{await fetch(\"\".concat(BASE_URL,\"/booking-requests/\").concat(id,\"/decision\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({decision})});load();};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(CommonSection,{title:\"Cancellation / Reschedule Requests\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[list.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No requests.\"}),list.map(r=>{var _r$booking;return/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border rounded-3 mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.type.toUpperCase()}),\" \\u2014 Booking \",(_r$booking=r.booking)===null||_r$booking===void 0?void 0:_r$booking._id]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Status: \",r.status]}),r.requestedDate&&/*#__PURE__*/_jsxs(\"div\",{children:[\"New Date: \",r.requestedDate.slice(0,10)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary__btn\",onClick:()=>decide(r._id,\"approved\"),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary__btn\",onClick:()=>decide(r._id,\"rejected\"),children:\"Reject\"})]})]})},r._id);})]})]});}","map":{"version":3,"names":["React","useEffect","useState","CommonSection","BASE_URL","jsx","_jsx","jsxs","_jsxs","AdminRequests","list","setList","token","localStorage","getItem","load","fetch","concat","headers","Authorization","then","r","json","decide","id","decision","method","body","JSON","stringify","children","title","className","length","map","_r$booking","type","toUpperCase","booking","_id","status","requestedDate","slice","onClick"],"sources":["C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/src/pages/AdminRequests.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CommonSection from \"../shared/CommonSection\";\nimport { BASE_URL } from \"../utils/config\";\n\nexport default function AdminRequests() {\n  const [list, setList] = useState([]);\n  const token = localStorage.getItem(\"token\");\n\n  const load = () => {\n    fetch(`${BASE_URL}/booking-requests`, { headers: { Authorization: `Bearer ${token}` } })\n      .then(r=>r.json()).then(setList);\n  };\n\n  useEffect(load, []);\n\n  const decide = async (id, decision) => {\n    await fetch(`${BASE_URL}/booking-requests/${id}/decision`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ decision })\n    });\n    load();\n  };\n\n  return (\n    <section>\n      <CommonSection title={\"Cancellation / Reschedule Requests\"} />\n      <div className=\"container\">\n        {list.length === 0 && <p>No requests.</p>}\n        {list.map(r => (\n          <div key={r._id} className=\"p-3 border rounded-3 mb-2\">\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <div>\n                <div><strong>{r.type.toUpperCase()}</strong> â€” Booking {r.booking?._id}</div>\n                <div>Status: {r.status}</div>\n                {r.requestedDate && <div>New Date: {r.requestedDate.slice(0,10)}</div>}\n              </div>\n              <div className=\"d-flex gap-2\">\n                <button className=\"btn primary__btn\" onClick={()=>decide(r._id,\"approved\")}>Approve</button>\n                <button className=\"btn secondary__btn\" onClick={()=>decide(r._id,\"rejected\")}>Reject</button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}