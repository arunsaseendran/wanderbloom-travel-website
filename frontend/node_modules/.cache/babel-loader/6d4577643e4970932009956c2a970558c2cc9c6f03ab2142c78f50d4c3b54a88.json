{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import CommonSection from\"../shared/CommonSection\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminRequests(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var token=localStorage.getItem(\"token\");var load=function load(){fetch(\"\".concat(BASE_URL,\"/booking-requests\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(r){return r.json();}).then(setList);};useEffect(load,[]);var decide=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,decision){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(BASE_URL,\"/booking-requests/\").concat(id,\"/decision\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({decision:decision})});case 2:load();case 3:case\"end\":return _context.stop();}},_callee);}));return function decide(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(CommonSection,{title:\"Cancellation / Reschedule Requests\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[list.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No requests.\"}),list.map(function(r){var _r$booking;return/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border rounded-3 mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.type.toUpperCase()}),\" \\u2014 Booking \",(_r$booking=r.booking)===null||_r$booking===void 0?void 0:_r$booking._id]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Status: \",r.status]}),r.requestedDate&&/*#__PURE__*/_jsxs(\"div\",{children:[\"New Date: \",r.requestedDate.slice(0,10)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary__btn\",onClick:function onClick(){return decide(r._id,\"approved\");},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary__btn\",onClick:function onClick(){return decide(r._id,\"rejected\");},children:\"Reject\"})]})]})},r._id);})]})]});}","map":{"version":3,"names":["React","useEffect","useState","CommonSection","BASE_URL","AdminRequests","list","setList","token","localStorage","getItem","load","fetch","headers","Authorization","then","r","json","decide","id","decision","method","body","JSON","stringify","length","map","type","toUpperCase","booking","_id","status","requestedDate","slice"],"sources":["C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/src/pages/AdminRequests.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CommonSection from \"../shared/CommonSection\";\nimport { BASE_URL } from \"../utils/config\";\n\nexport default function AdminRequests() {\n  const [list, setList] = useState([]);\n  const token = localStorage.getItem(\"token\");\n\n  const load = () => {\n    fetch(`${BASE_URL}/booking-requests`, { headers: { Authorization: `Bearer ${token}` } })\n      .then(r=>r.json()).then(setList);\n  };\n\n  useEffect(load, []);\n\n  const decide = async (id, decision) => {\n    await fetch(`${BASE_URL}/booking-requests/${id}/decision`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ decision })\n    });\n    load();\n  };\n\n  return (\n    <section>\n      <CommonSection title={\"Cancellation / Reschedule Requests\"} />\n      <div className=\"container\">\n        {list.length === 0 && <p>No requests.</p>}\n        {list.map(r => (\n          <div key={r._id} className=\"p-3 border rounded-3 mb-2\">\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <div>\n                <div><strong>{r.type.toUpperCase()}</strong> â€” Booking {r.booking?._id}</div>\n                <div>Status: {r.status}</div>\n                {r.requestedDate && <div>New Date: {r.requestedDate.slice(0,10)}</div>}\n              </div>\n              <div className=\"d-flex gap-2\">\n                <button className=\"btn primary__btn\" onClick={()=>decide(r._id,\"approved\")}>Approve</button>\n                <button className=\"btn secondary__btn\" onClick={()=>decide(r._id,\"rejected\")}>Reject</button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"mappings":"ibAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,cAAa,KAAM,yBAAyB,CACnD,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,wFAE3C,cAAe,SAASC,cAAa,EAAG,CACtC,cAAwBH,QAAQ,CAAC,EAAE,CAAC,wCAA7BI,IAAI,eAAEC,OAAO,eACpB,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjBC,KAAK,WAAIR,QAAQ,sBAAqB,CAAES,OAAO,CAAE,CAAEC,aAAa,kBAAYN,KAAK,CAAG,CAAE,CAAC,CAAC,CACrFO,IAAI,CAAC,SAAAC,CAAC,QAAEA,EAAC,CAACC,IAAI,EAAE,GAAC,CAACF,IAAI,CAACR,OAAO,CAAC,CACpC,CAAC,CAEDN,SAAS,CAACU,IAAI,CAAE,EAAE,CAAC,CAEnB,GAAMO,OAAM,4FAAG,iBAAOC,EAAE,CAAEC,QAAQ,yIAC1BR,MAAK,WAAIR,QAAQ,8BAAqBe,EAAE,cAAa,CACzDE,MAAM,CAAE,MAAM,CACdR,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAkB,CAAEC,aAAa,kBAAYN,KAAK,CAAG,CAAC,CACjFc,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEJ,QAAQ,CAARA,QAAS,CAAC,CACnC,CAAC,CAAC,QACFT,IAAI,EAAE,CAAC,qDACR,kBAPKO,OAAM,gDAOX,CAED,mBACE,wCACE,KAAC,aAAa,EAAC,KAAK,CAAE,oCAAqC,EAAG,cAC9D,aAAK,SAAS,CAAC,WAAW,WACvBZ,IAAI,CAACmB,MAAM,GAAK,CAAC,eAAI,mBAAG,cAAY,EAAI,CACxCnB,IAAI,CAACoB,GAAG,CAAC,SAAAV,CAAC,oCACT,YAAiB,SAAS,CAAC,2BAA2B,uBACpD,aAAK,SAAS,CAAC,mDAAmD,wBAChE,oCACE,oCAAK,wBAASA,CAAC,CAACW,IAAI,CAACC,WAAW,EAAE,EAAU,mBAAW,aAACZ,CAAC,CAACa,OAAO,qCAAT,WAAWC,GAAG,GAAO,cAC7E,uBAAK,UAAQ,CAACd,CAAC,CAACe,MAAM,GAAO,CAC5Bf,CAAC,CAACgB,aAAa,eAAI,uBAAK,YAAU,CAAChB,CAAC,CAACgB,aAAa,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAO,GAClE,cACN,aAAK,SAAS,CAAC,cAAc,wBAC3B,eAAQ,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAE,yBAAIf,OAAM,CAACF,CAAC,CAACc,GAAG,CAAC,UAAU,CAAC,EAAC,UAAC,SAAO,EAAS,cAC5F,eAAQ,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAE,yBAAIZ,OAAM,CAACF,CAAC,CAACc,GAAG,CAAC,UAAU,CAAC,EAAC,UAAC,QAAM,EAAS,GACzF,GACF,EAXEd,CAAC,CAACc,GAAG,CAYT,EACP,CAAC,GACE,GACE,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}