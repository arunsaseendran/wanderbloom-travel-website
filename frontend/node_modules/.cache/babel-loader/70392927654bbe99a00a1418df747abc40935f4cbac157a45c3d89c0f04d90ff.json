{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import\"../styles/search-bar.css\";import{Col,Form,FormGroup}from\"reactstrap\";import{BASE_URL}from\"../utils/config\";import{useNavigate}from\"react-router-dom\";// ðŸ”¹ Import JSON directly\nimport toursData from\"../assets/data/tours.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchBar=function SearchBar(){var locationRef=useRef(\"\");var distanceRef=useRef(null);var maxGroupSizeRef=useRef(0);var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),locationInput=_useState2[0],setLocationInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),locationInput1=_useState4[0],setLocationInput1=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),suggestions=_useState6[0],setSuggestions=_useState6[1];var handleLocationChange=function handleLocationChange(e){var value=e.target.value;setLocationInput(value);setLocationInput1(value);if(value.length>0){// filter tours by title\nvar filtered=toursData.filter(function(tour){return tour.title.toLowerCase().startsWith(value.toLowerCase());});setSuggestions(filtered);}else{setSuggestions([]);}};var handleSuggestionClick=function handleSuggestionClick(tour){setLocationInput(tour.city);setLocationInput1(tour.title);setSuggestions([]);// ðŸ”¹ Auto-fill distance\nif(distanceRef.current){distanceRef.current.value=tour.distance;}if(maxGroupSizeRef.current){maxGroupSizeRef.current.value=1;}};var searchHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var location,distance,maxGroupSize,res,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:location=locationInput;distance=distanceRef.current.value;maxGroupSize=maxGroupSizeRef.current.value;if(!(location===\"\"||distance===\"\"||maxGroupSize===\"\")){_context.next=5;break;}return _context.abrupt(\"return\",alert(\"Please fill all fields\"));case 5:_context.prev=5;_context.next=8;return fetch(\"\".concat(BASE_URL,\"/tours/search/getTourBySearch?city=\").concat(location,\"&distance=\").concat(distance,\"&maxGroupSize=\").concat(maxGroupSize));case 8:res=_context.sent;if(res.ok){_context.next=12;break;}alert(\"Something went wrong\");return _context.abrupt(\"return\");case 12:_context.next=14;return res.json();case 14:result=_context.sent;navigate(\"/tours/search?city=\".concat(location,\"&distance=\").concat(distance,\"&maxGroupSize=\").concat(maxGroupSize),{state:result.data});_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](5);console.error(_context.t0);alert(\"Failed to fetch data\");case 22:case\"end\":return _context.stop();}},_callee,null,[[5,18]]);}));return function searchHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Col,{lg:\"12\",md:\"12\",sm:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"search__bar\",children:/*#__PURE__*/_jsxs(Form,{className:\"d-flex align-items-center gap-4\",children:[/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex gap-3 form__group form__group-fast\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-line\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title...\",value:locationInput1,onChange:handleLocationChange,ref:locationRef,autoComplete:\"off\"}),suggestions.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"suggestions-list\",children:suggestions.map(function(tour,idx){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return handleSuggestionClick(tour);},className:\"suggestion-item\",children:tour.title},idx);})})]})]}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex gap-3 form__group form__group-fast\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-time-line\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Distance\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Distance k/m\",ref:distanceRef})]})]}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex gap-3 form__group form__group-last\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-group-line\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Max People\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"0\",ref:maxGroupSizeRef})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"search__icon\",type:\"submit\",onClick:searchHandler,children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-search-line\"})})]})})});};export default SearchBar;","map":{"version":3,"names":["React","useRef","useState","Col","Form","FormGroup","BASE_URL","useNavigate","toursData","SearchBar","locationRef","distanceRef","maxGroupSizeRef","navigate","locationInput","setLocationInput","locationInput1","setLocationInput1","suggestions","setSuggestions","handleLocationChange","e","value","target","length","filtered","filter","tour","title","toLowerCase","startsWith","handleSuggestionClick","city","current","distance","searchHandler","location","maxGroupSize","alert","fetch","res","ok","json","result","state","data","console","error","position","map","idx"],"sources":["C:/Users/00134/Desktop/Contents/MERN/PROJECT/frontend/src/shared/SearchBar.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport \"../styles/search-bar.css\";\nimport { Col, Form, FormGroup } from \"reactstrap\";\nimport { BASE_URL } from \"../utils/config\";\nimport { useNavigate } from \"react-router-dom\";\n\n// ðŸ”¹ Import JSON directly\nimport toursData from \"../assets/data/tours.json\";\n\nconst SearchBar = () => {\n  const locationRef = useRef(\"\");\n  const distanceRef = useRef(null);\n  const maxGroupSizeRef = useRef(0);\n  const navigate = useNavigate();\n\n  const [locationInput, setLocationInput] = useState(\"\");\n  const [locationInput1, setLocationInput1] = useState(\"\");\n  const [suggestions, setSuggestions] = useState([]);\n\n  const handleLocationChange = (e) => {\n    const value = e.target.value;\n    setLocationInput(value);\n    setLocationInput1(value);\n\n    if (value.length > 0) {\n      // filter tours by title\n      const filtered = toursData.filter((tour) =>\n        tour.title.toLowerCase().startsWith(value.toLowerCase())\n      );\n      setSuggestions(filtered);\n    } else {\n      setSuggestions([]);\n    }\n  };\n\n  const handleSuggestionClick = (tour) => {\n    setLocationInput(tour.city);\n    setLocationInput1(tour.title);\n    setSuggestions([]);\n\n    // ðŸ”¹ Auto-fill distance\n    if (distanceRef.current) {\n      distanceRef.current.value = tour.distance;\n    }\n\n    if (maxGroupSizeRef.current) {\n      maxGroupSizeRef.current.value = 1;\n    }\n\n  };\n\n  const searchHandler = async () => {\n    const location = locationInput;\n    const distance = distanceRef.current.value;\n    const maxGroupSize = maxGroupSizeRef.current.value;\n\n    if (location === \"\" || distance === \"\" || maxGroupSize === \"\") {\n      return alert(\"Please fill all fields\");\n    }\n\n    try {\n      const res = await fetch(\n        `${BASE_URL}/tours/search/getTourBySearch?city=${location}&distance=${distance}&maxGroupSize=${maxGroupSize}`\n      );\n\n      if (!res.ok) {\n        alert(\"Something went wrong\");\n        return;\n      }\n\n      const result = await res.json();\n\n      navigate(\n        `/tours/search?city=${location}&distance=${distance}&maxGroupSize=${maxGroupSize}`,\n        { state: result.data }\n      );\n    } catch (error) {\n      console.error(error);\n      alert(\"Failed to fetch data\");\n    }\n  };\n\n  return (\n    <Col lg=\"12\" md=\"12\" sm=\"12\">\n      <div className=\"search__bar\">\n        <Form className=\"d-flex align-items-center gap-4\">\n          {/* Location */}\n          <FormGroup className=\"d-flex gap-3 form__group form__group-fast\">\n            <span>\n              <i className=\"ri-map-pin-line\"></i>\n            </span>\n            <div style={{ position: \"relative\" }}>\n              <h6>Location</h6>\n              <input\n                type=\"text\"\n                placeholder=\"Search by title...\"\n                value={locationInput1}\n                onChange={handleLocationChange}\n                ref={locationRef}\n                autoComplete=\"off\"\n              />\n\n              {/* Suggestions dropdown */}\n              {suggestions.length > 0 && (\n                <ul className=\"suggestions-list\">\n                  {suggestions.map((tour, idx) => (\n                    <li\n                      key={idx}\n                      onClick={() => handleSuggestionClick(tour)}\n                      className=\"suggestion-item\"\n                    >\n                      {tour.title}\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          </FormGroup>\n\n          {/* Distance */}\n          <FormGroup className=\"d-flex gap-3 form__group form__group-fast\">\n            <span>\n              <i className=\"ri-map-pin-time-line\"></i>\n            </span>\n            <div>\n              <h6>Distance</h6>\n              <input\n                type=\"number\"\n                placeholder=\"Distance k/m\"\n                ref={distanceRef}\n              />\n            </div>\n          </FormGroup>\n\n          {/* Max People */}\n          <FormGroup className=\"d-flex gap-3 form__group form__group-last\">\n            <span>\n              <i className=\"ri-group-line\"></i>\n            </span>\n            <div>\n              <h6>Max People</h6>\n              <input type=\"number\" placeholder=\"0\" ref={maxGroupSizeRef} />\n            </div>\n          </FormGroup>\n\n          {/* Search button */}\n          <span className=\"search__icon\" type=\"submit\" onClick={searchHandler}>\n            <i className=\"ri-search-line\"></i>\n          </span>\n        </Form>\n      </div>\n    </Col>\n  );\n};\n\nexport default SearchBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}